<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografis Panduan Sistem Bus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Brilliant Blues -->
    <!-- Application Structure Plan: The infographic is structured as a top-to-bottom narrative scroll, guiding the user from the foundational system (Power) to more applied systems (Payment). This linear flow mimics a logical learning path for a technician. Key information is presented in visually distinct cards using a grid layout, mixing large-type statistics, custom diagrams built with HTML/CSS, and data charts. This design avoids dense text blocks and uses visual hierarchy to make critical information like wiring diagrams and key specs immediately scannable, which is more effective for a field guide than a linear text document. -->
    <!-- Visualization & Content Choices: 
    - Report Info: Relay Function -> Goal: Inform -> Viz/Presentation Method: Custom HTML/CSS diagram with icons. Interaction: None. Justification: A static, clear visual is more effective for explaining a core concept than text alone. Library/Method: HTML/Tailwind CSS.
    - Report Info: Tools Required -> Goal: Inform/Organize -> Viz/Presentation Method: Donut Chart. Interaction: Hover tooltips. Justification: Quickly visualizes the composition of essential tools. Library/Method: Chart.js.
    - Report Info: Installation Processes -> Goal: Organize -> Viz/Presentation Method: Numbered step-by-step visual guides using flexbox. Interaction: None. Justification: Breaks down complex procedures into simple, sequential steps. Library/Method: HTML/Tailwind CSS.
    - New Feature: Optimal Cable and Fuse Recommender -> Goal: Provide practical safety advice for electrical installations -> Viz/Presentation: Text output based on user input. Interaction: Number inputs, button click, LLM API call. Justification: Leverages LLM for practical planning, directly assisting technicians with safety-critical calculations. Library/Method: Vanilla JS, Gemini API.
    - New Feature: Common Error Code Explainer -> Goal: Aid in diagnosing payment system issues -> Viz/Presentation: Text output based on user input. Interaction: Text input, button click, LLM API call. Justification: Uses LLM for problem-solving, enhancing troubleshooting capabilities for common errors. Library: Vanilla JS, Gemini API.
    - New Feature: Simple Circuit Design Suggestion -> Goal: Help in basic circuit planning for accessory integration -> Viz/Presentation: Text output based on user input. Interaction: Textarea input, button click, LLM API call. Justification: Provides quick conceptual electrical design assistance. Library/Method: Vanilla JS, Gemini API.
    - New Feature: EDC Configuration Tips -> Goal: Offer guidance on setting up payment device parameters -> Viz/Presentation: Text output based on user input. Interaction: Textarea input, button click, LLM API call. Justification: Assists technicians with device setup and optimization. Library: Vanilla JS, Gemini API.
    - New Feature: Troubleshooting General Electrical Issues -> Goal: Provide diagnostic help for broader electrical problems beyond just fuses/cables -> Viz/Presentation: Text output based on user input. Interaction: Textarea input, button click, LLM API call. Justification: Expands the troubleshooting capabilities of the power section. Library: Vanilla JS, Gemini API.
    - New Feature: Daily Transaction Data Summary -> Goal: Offer insights into transaction performance -> Viz/Presentation: Text summary based on simulated data input. Interaction: Textarea input, button click, LLM API call. Justification: Provides quick data analysis capability relevant to the payment system. Library: Vanilla JS, Gemini API.
    - Integrated Feature: Electrical Schematics -> Goal: Provide detailed visual reference for wiring -> Viz/Presentation: Custom HTML/CSS diagrams. Interaction: None. Justification: Directly embeds critical wiring diagrams for easy reference within the relevant section. Library: HTML/Tailwind CSS.
    - New Feature: GPS GT08 Troubleshooting (LLM) - for GPS section.
    - New Segment: GPS GT08.
    - New Segment: EDC Cilico CM550X.
    - New Segment: TOB HCCTG P18-Q.
    - New Feature: Generator Checklist Inspeksi Kelistrikan Pra-Operasi - for Power section.
    - New Feature: Saran Optimasi Penggunaan Data GPS - for GPS section.
    - New Feature: Simulasi Skenario Transaksi & Solusi - for EDC Cilico section.
    - New Feature: Tips Pembersihan & Perawatan Sensor Pembaca Kartu - for TOB HCCTG section.
    - New Feature: Skema Instalasi GPS GT08 - for GPS section.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f9ff; }
        .bg-glass { background-color: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); }
        .kpi-box { background: linear-gradient(135deg, #0096C7, #0077B6); }
        .flow-line { content: ''; position: absolute; top: 50%; left: 100%; width: 2rem; height: 2px; background-color: #90E0EF; }
        .flow-line-vertical { content: ''; position: absolute; top: 100%; left: 50%; width: 2px; height: 2rem; background-color: #90E0EF; transform: translateX(-50%); }

        /* Styles from bus_systems_schematics */
        .schematic-box { border: 1px solid #cbd5e1; padding: 1rem; border-radius: 0.5rem; position: relative; background-color: #ffffff; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .pin-label { background-color: #f8fafc; padding: 0 0.25rem; font-size: 0.75rem; font-weight: 600; color: #475569; }
        .text-blue-primary-schematic { color: #023E8A; } /* Renamed to avoid conflict */
        .text-blue-secondary-schematic { color: #0077B6; } /* Renamed to avoid conflict */
        .border-blue-primary-schematic { border-color: #0077B6; } /* Renamed to avoid conflict */
        .border-teal-schematic { border-color: #48CAE4; } /* Renamed to avoid conflict */
        .bg-blue-light-schematic { background-color: #CAF0F8; } /* Renamed to avoid conflict */
        .bg-blue-dark-schematic { background-color: #0077B6; } /* Renamed to avoid conflict */
    </style>
</head>
<body class="text-slate-700">

    <div class="container mx-auto px-4 py-8 md:py-12">
        
        <header class="text-center mb-12 md:mb-16">
            <h1 class="text-4xl md:text-5xl font-extrabold text-[#023E8A]">Panduan Visual Sistem Bus</h1>
            <p class="mt-4 text-lg text-[#0077B6]">Infografis untuk Pemasangan & Perawatan Sistem Daya, Pelacakan, dan Pembayaran.</p>
        </header>

        <main class="space-y-16">

            <section id="power">
                <h2 class="text-3xl font-bold text-center mb-8 text-[#023E8A]">BAGIAN 1: Fondasi Daya - Instalasi Relay Aman</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <div class="lg:col-span-2 bg-white rounded-2xl shadow-lg p-6 flex flex-col md:flex-row items-center gap-6">
                        <div class="flex-shrink-0">
                            <div class="w-40 h-40 bg-[#CAF0F8] rounded-full flex items-center justify-center text-[#023E8A] text-6xl font-bold">4</div>
                        </div>
                        <div class="flex-grow">
                             <h3 class="text-2xl font-bold text-[#0077B6]">Anatomi Relay 4 Kaki</h3>
                             <p class="mt-2 mb-4 text-slate-600">Relay adalah sakelar otomatis yang melindungi sistem kelistrikan bus. Sinyal kecil dari pin 86 mengontrol aliran daya besar dari pin 30 ke 87.</p>
                             <div class="grid grid-cols-2 gap-4 text-sm">
                                <div class="flex items-center"><span class="font-mono font-bold text-lg text-white bg-[#0096C7] w-8 h-8 rounded-md flex items-center justify-center mr-2">30</span> Input Daya Utama</div>
                                <div class="flex items-center"><span class="font-mono font-bold text-lg text-white bg-[#0096C7] w-8 h-8 rounded-md flex items-center justify-center mr-2">87</span> Output ke Perangkat</div>
                                <div class="flex items-center"><span class="font-mono font-bold text-lg text-white bg-[#0096C7] w-8 h-8 rounded-md flex items-center justify-center mr-2">86</span> Sinyal Pemicu (+)</div>
                                <div class="flex items-center"><span class="font-mono font-bold text-lg text-white bg-[#0096C7] w-8 h-8 rounded-md flex items-center justify-center mr-2">85</span> Ground / Massa (-)</div>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-box text-white rounded-2xl shadow-lg p-6 flex flex-col justify-center items-center text-center">
                         <h3 class="text-2xl font-bold">Gunakan Sekring!</h3>
                         <p class="text-5xl font-extrabold my-2">125%</p>
                         <p class="text-sm text-[#ADE8F4]">Ukuran sekring aman adalah 125% dari total arus perangkat untuk memberi ruang gerak dan mencegah panas berlebih.</p>
                    </div>

                    <div class="bg-white rounded-2xl shadow-lg p-6">
                         <h3 class="text-2xl font-bold text-center mb-4 text-[#0077B6]">Alat Kerja Esensial</h3>
                        <div class="chart-container mx-auto relative h-64 w-full max-w-sm">
                            <canvas id="toolsChart"></canvas>
                        </div>
                    </div>

                    <div class="lg:col-span-2 bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Alur Instalasi Relay 24V</h3>
                        <div class="flex flex-col md:flex-row justify-around items-center text-center gap-8 md:gap-4">
                            <div class="relative flex flex-col items-center">
                                <div class="w-24 h-24 bg-[#CAF0F8] rounded-full flex items-center justify-center"><span class="text-4xl">⚡️</span></div>
                                <p class="mt-2 font-bold">1. Sumber 24V</p>
                                <p class="text-xs text-slate-500">Ambil dari aki</p>
                                <div class="hidden md:block flow-line"></div>
                                <div class="md:hidden flow-line-vertical"></div>
                            </div>
                             <div class="relative flex flex-col items-center">
                                <div class="w-24 h-24 bg-[#ADE8F4] rounded-full flex items-center justify-center"><span class="text-4xl">🛡️</span></div>
                                <p class="mt-2 font-bold">2. Pasang Sekring</p>
                                <p class="text-xs text-slate-500">Wajib untuk keamanan</p>
                                <div class="hidden md:block flow-line"></div>
                                <div class="md:hidden flow-line-vertical"></div>
                            </div>
                             <div class="relative flex flex-col items-center">
                                <div class="w-24 h-24 bg-[#90E0EF] rounded-full flex items-center justify-center"><span class="text-4xl">🔄</span></div>
                                <p class="mt-2 font-bold">3. Sambung Relay</p>
                                <p class="text-xs text-slate-500">Sesuai pin 30,85,86,87</p>
                                <div class="hidden md:block flow-line"></div>
                                 <div class="md:hidden flow-line-vertical"></div>
                            </div>
                             <div class="relative flex flex-col items-center">
                                <div class="w-24 h-24 bg-[#48CAE4] rounded-full flex items-center justify-center"><span class="text-4xl">🔌</span></div>
                                <p class="mt-2 font-bold">4. Hubungkan Beban</p>
                                <p class="text-xs text-slate-500">Ke perangkat tujuan</p>
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Saran Ukuran Kabel & Sekring ✨</h3>
                        <p class="text-slate-600 mb-4">Dapatkan rekomendasi spesifikasi kelistrikan yang aman untuk perangkat Anda.</p>
                        <div class="flex flex-col sm:flex-row gap-4 items-center mb-4">
                            <label for="inputCurrent" class="text-slate-700 font-medium">Arus Total (Ampere):</label>
                            <input type="number" id="inputCurrent" placeholder="Ex: 10" class="flex-grow p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6]">
                            <label for="inputVoltage" class="text-slate-700 font-medium">Tegangan (Volt):</label>
                            <select id="inputVoltage" class="p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6]">
                                <option value="12">12V</option>
                                <option value="24">24V</option>
                            </select>
                            <button id="getRecommendation" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Saran ✨</button>
                        </div>
                        <div id="recommendationResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                            <div id="loadingIndicator" class="text-center hidden">Memproses...</div>
                            <div id="resultContent"></div>
                        </div>
                    </div>
                    
                    <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Saran Desain Rangkaian Sederhana ✨</h3>
                        <p class="text-slate-600 mb-4">Jelaskan kebutuhan rangkaian sederhana Anda (misalnya: "nyalakan lampu saat pintu bus terbuka"), dan Gemini akan memberikan saran desain dasar.</p>
                        <textarea id="circuitDesignPrompt" rows="4" placeholder="Contoh: Saya ingin lampu kabin menyala otomatis ketika bus berhenti dan pintu terbuka." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                        <button id="getCircuitDesign" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Saran Desain ✨</button>
                        <div id="circuitDesignResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                            <div id="loadingCircuit" class="text-center hidden">Memproses...</div>
                            <div id="circuitResultContent"></div>
                        </div>
                    </div>

                    <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Troubleshooting Masalah Kelistrikan Umum ✨</h3>
                        <p class="text-slate-600 mb-4">Masukkan gejala masalah kelistrikan yang Anda alami di bus (misalnya, "Lampu tidak menyala", "Sekring sering putus"), dan Gemini akan memberikan potensi penyebab serta langkah perbaikan.</p>
                        <textarea id="electricalTroubleshootPrompt" rows="4" placeholder="Contoh: Lampu interior bus redup saat mesin dihidupkan, tetapi terang saat mesin mati." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                        <button id="getElectricalTroubleshoot" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Solusi ✨</button>
                        <div id="electricalTroubleshootResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                            <div id="loadingElectrical" class="text-center hidden">Memproses...</div>
                            <div id="electricalResultContent"></div>
                        </div>
                    </div>

                    <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Generator Jadwal Perawatan Preventif Kelistrikan ✨</h3>
                        <p class="text-slate-600 mb-4">Masukkan jenis kendaraan (contoh: "bus kota") dan frekuensi penggunaan (contoh: "harian, 10 jam") untuk mendapatkan saran jadwal perawatan kelistrikan.</p>
                        <textarea id="electricalMaintenancePrompt" rows="4" placeholder="Contoh: Bus pariwisata, penggunaan jarak jauh, 5000 km/bulan." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                        <button id="getElectricalMaintenance" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Hasilkan Jadwal ✨</button>
                        <div id="electricalMaintenanceResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                            <div id="loadingElectricalMaintenance" class="text-center hidden">Memproses...</div>
                            <div id="electricalMaintenanceContent"></div>
                        </div>
                    </div>


                     <!-- Start of Schematics from bus_systems_schematics -->
                    <div class="lg:col-span-3 bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold text-center mb-6 text-blue-secondary-schematic">Instalasi 24V (Langsung)</h2>
                        <div class="schematic-box text-center text-sm mb-4">
                            <div class="mb-4 font-bold text-lg text-red-600">⚡️ SUMBER DAYA BUS (+24V)</div>
                            <div class="h-8 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="mx-auto my-1 p-2 bg-blue-light-schematic rounded-md">🛡️ SEKRING (Contoh: 10A)</div>
                            <div class="h-8 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="border-2 border-blue-primary-schematic rounded-lg p-4 relative">
                                <span class="absolute -top-3 bg-white px-2 font-bold text-blue-secondary-schematic text-base">RELAY 24V (4 Kaki)</span>
                                <div class="flex justify-between items-center h-20">
                                    <div class="text-left">
                                        <div class="pin-label">30</div>
                                        <div class="h-6 w-0.5 bg-slate-400 ml-2 mt-1"></div>
                                    </div>
                                    <div class="text-right">
                                        <div class="pin-label">87</div>
                                        <div class="h-6 w-0.5 bg-slate-400 mr-2 mt-1"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center h-10 mt-2">
                                    <div class="text-left"><div class="pin-label">86</div></div>
                                    <div class="text-right"><div class="pin-label">85</div></div>
                                </div>
                            </div>
                            <div class="h-8 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="mt-4 font-bold text-lg text-green-600">🔌 KELUARAN KE PERANGKAT/BEBAN (+24V)</div>
                            
                            <div class="absolute text-xs font-semibold text-slate-600" style="left:10%; top: 60%;">🔑<br>SUMBER<br>PEMICU<br>(+24V)</div>
                            <div class="absolute" style="left:21%; top: 68%;"><div class="h-10 w-0.5 bg-slate-400"></div></div>
                            <div class="absolute" style="left:21%; top: 80%; border-top: 1px solid #94a3b8; width: 60px;"></div>

                            <div class="absolute text-xs font-semibold text-slate-600" style="right:10%; top: 60%;">GND<br>MASSA<br>BUS (-)</div>
                            <div class="absolute" style="right:21%; top: 68%;"><div class="h-10 w-0.5 bg-slate-400"></div></div>
                            <div class="absolute" style="right:21%; top: 80%; border-top: 1px solid #94a3b8; width: 60px;"></div>
                        </div>
                        <div class="mt-6 text-base text-slate-600">
                            <h3 class="font-bold text-blue-secondary-schematic mb-2">Penjelasan:</h3>
                            <p>Dalam skema ini, listrik 24V dari bus langsung masuk ke Pin 30 relay melalui sekring untuk perlindungan. Pin 85 terhubung ke ground bus. Sinyal pemicu dari kunci kontak atau sakelar masuk ke Pin 86. Ketika Pin 86 aktif, relay akan terhubung, mengalirkan daya 24V ke perangkat tambahan dari Pin 87. Ini adalah instalasi standar untuk sistem 24V.</p>
                        </div>
                    </div>

                    <div class="lg:col-span-3 bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold text-center mb-6 text-blue-secondary-schematic">Instalasi 12V (dari Bus 24V)</h2>
                        <div class="schematic-box text-center text-sm mb-4">
                            <div class="mb-2 font-bold text-lg text-red-600">⚡️ SUMBER DAYA BUS (+24V)</div>
                            <div class="h-4 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="mx-auto my-1 p-2 bg-blue-light-schematic rounded-md">🛡️ SEKRING UTAMA (Contoh: 15A)</div>
                            <div class="h-4 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="border rounded-md p-2 bg-blue-light-schematic text-blue-primary-schematic font-semibold text-base">🔄 ALAT PENGUBAH TEGANGAN DC-DC (24V jadi 12V)</div>
                            <div class="h-4 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="mx-auto my-1 p-2 bg-blue-light-schematic rounded-md">🛡️ SEKRING BEBAN 12V (Contoh: 10A)</div>
                            <div class="h-4 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="border-2 border-teal-schematic rounded-lg p-4 relative">
                                <span class="absolute -top-3 bg-white px-2 font-bold text-teal-schematic text-base">RELAY 12V (4 Kaki)</span>
                                <div class="flex justify-between items-center h-16">
                                    <div class="text-left"><div class="pin-label">30</div><div class="h-4 w-0.5 bg-slate-400 ml-2 mt-1"></div></div>
                                    <div class="text-right"><div class="pin-label">87</div><div class="h-4 w-0.5 bg-slate-400 mr-2 mt-1"></div></div>
                                </div>
                                <div class="flex justify-between items-center h-8 mt-1">
                                    <div class="text-left"><div class="pin-label">86</div></div>
                                    <div class="text-right"><div class="pin-label">85</div></div>
                                </div>
                            </div>
                            <div class="h-4 w-0.5 bg-slate-400 mx-auto"></div>
                            <div class="mt-4 font-bold text-lg text-green-600">🔌 KELUARAN KE PERANGKAT/BEBAN (+12V)</div>
                            
                            <div class="absolute text-xs font-semibold text-slate-600" style="left:10%; top: 78%;">🔑<br>SUMBER<br>PEMICU<br>(+12V)</div>
                            <div class="absolute" style="left:21%; top: 85%;"><div class="h-10 w-0.5 bg-slate-400"></div></div>
                            <div class="absolute" style="left:21%; top: 97%; border-top: 1px solid #94a3b8; width: 60px;"></div>

                            <div class="absolute text-xs font-semibold text-slate-600" style="right:10%; top: 78%;">GND<br>MASSA<br>BUS (-)</div>
                            <div class="absolute" style="right:21%; top: 85%;"><div class="h-10 w-0.5 bg-slate-400"></div></div>
                            <div class="absolute" style="right:21%; top: 97%; border-top: 1px solid #94a3b8; width: 60px;"></div>
                        </div>
                        <div class="mt-6 text-base text-slate-600">
                            <h3 class="font-bold text-blue-secondary-schematic mb-2">Penjelasan:</h3>
                            <p>Untuk perangkat 12V pada bus 24V, Anda memerlukan alat pengubah tegangan DC-DC (24V ke 12V). Daya 24V dari bus masuk ke alat pengubah, kemudian keluaran 12V-nya disekring lagi sebelum masuk ke Pin 30 relay 12V. Pin 85 ke ground, dan Pin 86 menerima pemicu 12V. Pin 87 akan menyalurkan daya 12V ke perangkat.</p>
                        </div>
                    </div>
                    <!-- End of Schematics from bus_systems_schematics -->

                </div>
            </section>
            
            <section id="gps">
                <h2 class="text-3xl font-bold text-center mb-8 text-[#023E8A]">BAGIAN 2: Sistem Pelacakan - GPS GT08</h2>
                <p class="text-lg text-slate-600 text-center mb-6">GPS Tracker GT08 adalah perangkat pelacak kendaraan multifungsi yang menggunakan jaringan GSM/GPRS dan sistem posisi satelit GPS. Dirancang untuk keamanan, pemosisian, pemantauan, alarm darurat, dan pelacakan komprehensif. Ini adalah alat penting untuk memantau satu kendaraan atau seluruh armada.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                        <span class="text-5xl">📍</span>
                        <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Pelacakan Real-time</h3>
                        <p class="text-3xl font-extrabold text-[#023E8A] my-2">GPS/GSM</p>
                        <p class="text-sm text-slate-500">Memberikan data lokasi dan kecepatan terkini melalui GPS dan jaringan seluler.</p>
                    </div>
                    <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                        <span class="text-5xl">🚨</span>
                        <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Multi-Alarm</h3>
                        <p class="text-3xl font-extrabold text-[#023E8A] my-2">Geo-fence, Overspeed</p>
                        <p class="text-sm text-slate-500">Peringatan instan untuk getaran, kecepatan berlebih, matikan daya, dan keluar zona aman.</p>
                    </div>
                    <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                        <span class="text-5xl">🛡️</span>
                        <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Tahan Lingkungan</h3>
                        <p class="text-3xl font-extrabold text-[#023E8A] my-2">IP65</p>
                        <p class="text-sm text-slate-500">Tahan debu dan air, memastikan operasi stabil di lingkungan yang keras.</p>
                    </div>
                    <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                        <span class="text-5xl">⚡️</span>
                        <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Daya Luas</h3>
                        <p class="text-3xl font-extrabold text-[#023E8A] my-2">9-90V</p>
                        <p class="text-sm text-slate-500">Rentang tegangan operasional yang lebar, cocok untuk berbagai jenis kendaraan (mobil, truk, motor, e-bike).</p>
                    </div>
                </div>

                <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Pemasangan & Konfigurasi Singkat GPS GT08</h3>
                    <ol class="grid md:grid-cols-3 gap-6 text-center">
                        <li class="border-t-4 border-[#90E0EF] pt-4">
                            <span class="text-3xl font-bold text-[#0096C7]">1</span>
                            <h4 class="font-bold mt-2">Siapkan SIM Card</h4>
                            <p class="text-sm text-slate-500">Pasang kartu SIM (dengan paket data aktif) ke slot pada perangkat GT08.</p>
                        </li>
                        <li class="border-t-4 border-[#48CAE4] pt-4">
                            <span class="text-3xl font-bold text-[#0077B6]">2</span>
                            <h4 class="font-bold mt-2">Sambung Daya</h4>
                            <p class="text-sm text-slate-500">Hubungkan kabel daya GT08 (biasanya merah ke positif baterai, hitam ke ground, oranye ke ACC/ignition) ke kelistrikan bus. Sesuaikan dengan diagram pemasangan spesifik GT08.</p>
                        </li>
                        <li class="border-t-4 border-[#0077B6] pt-4">
                            <span class="text-3xl font-bold text-[#023E8A]">3</span>
                            <h4 class="font-bold mt-2">Pilih Lokasi & Uji</h4>
                            <p class="text-sm text-slate-500">Pasang di lokasi tersembunyi dengan sinyal GPS yang baik (hindari tertutup logam). Uji pelacakan dan fungsi alarm melalui aplikasi/platform.</p>
                        </li>
                    </ol>
                </div>

                <!-- NEW: Skema Instalasi GPS GT08 -->
                <div class="lg:col-span-3 bg-white p-6 rounded-2xl shadow-lg mt-8">
                    <h2 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Skema Instalasi GPS GT08</h2>
                    <div class="schematic-box text-center text-sm mb-4">
                        <div class="mb-4 font-bold text-lg text-red-600">⚡️ SUMBER DAYA BUS</div>
                        <div class="flex justify-around items-center my-4">
                            <div class="flex flex-col items-center">
                                <div class="w-16 h-16 bg-red-200 rounded-full flex items-center justify-center font-bold text-red-700">+</div>
                                <p class="mt-2 text-xs">Kabel Merah (VCC)</p>
                            </div>
                            <div class="w-16 h-0.5 bg-slate-400"></div>
                            <div class="flex flex-col items-center">
                                <div class="w-16 h-16 bg-orange-200 rounded-full flex items-center justify-center font-bold text-orange-700">ACC</div>
                                <p class="mt-2 text-xs">Kabel Oranye (ACC/Ignition)</p>
                            </div>
                            <div class="w-16 h-0.5 bg-slate-400"></div>
                            <div class="flex flex-col items-center">
                                <div class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center font-bold text-gray-700">-</div>
                                <p class="mt-2 text-xs">Kabel Hitam (GND)</p>
                            </div>
                        </div>

                        <div class="h-8 w-0.5 bg-slate-400 mx-auto"></div>

                        <div class="border-2 border-[#0077B6] rounded-lg p-4 relative mx-auto" style="width: 80%;">
                            <span class="absolute -top-3 left-1/2 -translate-x-1/2 bg-white px-2 font-bold text-[#0077B6] text-base">GPS Tracker GT08</span>
                            <div class="flex justify-between items-center h-16">
                                <div class="text-left">
                                    <div class="pin-label bg-red-100 text-red-800">VCC (+ Daya)</div>
                                    <div class="h-6 w-0.5 bg-slate-400 ml-2 mt-1"></div>
                                </div>
                                <div class="text-right">
                                    <div class="pin-label bg-orange-100 text-orange-800">ACC (Ignition)</div>
                                    <div class="h-6 w-0.5 bg-slate-400 mr-2 mt-1"></div>
                                </div>
                            </div>
                            <div class="flex justify-center mt-2">
                                <div class="text-center">
                                    <div class="pin-label bg-gray-100 text-gray-800">GND (Massa)</div>
                                    <div class="h-6 w-0.5 bg-slate-400 mx-auto mt-1"></div>
                                </div>
                            </div>
                            <div class="mt-4 text-xs text-slate-600">
                                <p>Pastikan SIM Card terpasang dengan benar di slot yang tersedia.</p>
                                <p>Cek lampu indikator status (GPS, GSM) setelah pemasangan.</p>
                            </div>
                        </div>
                        <div class="mt-6 text-base text-slate-600">
                            <h3 class="font-bold text-[#0077B6] mb-2">Penjelasan:</h3>
                            <p>Skema ini menunjukkan koneksi dasar GPS GT08 ke sistem kelistrikan bus. Kabel merah (VCC) terhubung ke sumber daya positif konstan, kabel hitam (GND) ke ground/massa bus, dan kabel oranye (ACC) ke jalur kunci kontak (ignition) agar perangkat menyala saat bus dioperasikan. Penambahan sekring pada jalur VCC sangat disarankan untuk perlindungan.</p>
                        </div>
                    </div>
                </div>
                <!-- END NEW: Skema Instalasi GPS GT08 -->

                <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Troubleshooting GPS GT08 ✨</h3>
                    <p class="text-slate-600 mb-4">Masukkan gejala masalah yang Anda alami dengan GPS GT08 (misalnya, "Tidak ada sinyal GPS", "Alarm palsu"), dan Gemini akan memberikan potensi penyebab serta langkah perbaikan.</p>
                    <textarea id="gpsTroubleshootPrompt" rows="4" placeholder="Contoh: Perangkat GPS GT08 tidak mengirimkan lokasi terbaru." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getGpsTroubleshoot" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Solusi ✨</button>
                    <div id="gpsTroubleshootResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingGps" class="text-center hidden">Memproses...</div>
                        <div id="gpsResultContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Analisis Rute & Efisiensi Bahan Bakar ✨</h3>
                    <p class="text-slate-600 mb-4">Jelaskan kebiasaan mengemudi atau tantangan rute Anda (misalnya, "sering macet", "banyak tanjakan") untuk mendapatkan saran efisiensi bahan bakar.</p>
                    <textarea id="fuelEfficiencyPrompt" rows="4" placeholder="Contoh: Bus sering berhenti-jalan di lalu lintas kota padat." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getFuelEfficiency" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Saran Efisiensi ✨</button>
                    <div id="fuelEfficiencyResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingFuelEfficiency" class="text-center hidden">Memproses...</div>
                        <div id="fuelEfficiencyContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-3 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Saran Optimasi Penggunaan Data GPS ✨</h3>
                    <p class="text-slate-600 mb-4">Jelaskan frekuensi pelaporan dan masalah terkait penggunaan data (misalnya, "konsumsi data tinggi", "baterai cepat habis") untuk mendapatkan saran optimasi.</p>
                    <textarea id="gpsDataOptimizationPrompt" rows="4" placeholder="Contoh: Interval pelaporan 10 detik, baterai cepat habis." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getGpsDataOptimization" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Optimasi Data ✨</button>
                    <div id="gpsDataOptimizationResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingGpsDataOptimization" class="text-center hidden">Memproses...</div>
                        <div id="gpsDataOptimizationContent"></div>
                    </div>
                </div>

            </section>

            <section id="edc-cilico">
                <h2 class="text-3xl font-bold text-center mb-8 text-[#023E8A]">BAGIAN 3: Transaksi Cepat - EDC Cilico CM550X</h2>
                <p class="text-lg text-slate-600 text-center mb-6">Cilico CM550X adalah komputer mobile **genggam (handheld)** serbaguna dengan printer terintegrasi, dirancang untuk efisiensi transaksi pembayaran dan pengumpulan data di lingkungan yang beragam, termasuk transportasi.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                     <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">🔋</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Baterai Besar</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">4000mAh</p>
                         <p class="text-sm text-slate-500">Baterai Li-Ion 4000mAh yang dapat dilepas untuk daya tahan.
                     </div>
                      <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">💳</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Scan & NFC</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">1D/2D</p>
                         <p class="text-sm text-slate-500">Mendukung pemindaian kode 1D/2D profesional dan NFC (13.56MHz).</p>
                     </div>
                      <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">🌡️</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Tahan Suhu Ekstrem</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">-20°C - 55°C</p>
                         <p class="text-sm text-slate-500">Dirancang untuk beroperasi di rentang suhu yang luas, bersertifikat Drop.</p>
                     </div>
                      <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">📶</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Konektivitas Lengkap</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">4G & WiFi</p>
                         <p class="text-sm text-slate-500">Dilengkapi 4G/3G/2G, Wi-Fi Dual Band (2.4/5GHz), dan Bluetooth 5.0.</p>
                     </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#0077B6]">Langkah Pemasangan Fisik EDC Cilico CM550X</h3>
                    <ol class="grid md:grid-cols-3 gap-6 text-center">
                        <li class="border-t-4 border-[#90E0EF] pt-4">
                            <span class="text-3xl font-bold text-[#0096C7]">1</span>
                            <h4 class="font-bold mt-2">Pilih Lokasi</h4>
                            <p class="text-sm text-slate-500">Pasang di tiang dekat pintu masuk yang kokoh dan mudah dijangkau penumpang untuk *tapping* atau *scanning*.</p>
                        </li>
                         <li class="border-t-4 border-[#48CAE4] pt-4">
                            <span class="text-3xl font-bold text-[#0077B6]">2</span>
                            <h4 class="font-bold mt-2">Sambung Daya</h4>
                            <p class="text-sm text-slate-500">Pastikan perangkat terisi daya penuh atau terhubung ke sumber daya yang stabil melalui adaptor daya yang sesuai (bukan langsung ke aki bus).</p>
                        </li>
                         <li class="border-t-4 border-[#0077B6] pt-4">
                            <span class="text-3xl font-bold text-[#023E8A]">3</span>
                            <h4 class="font-bold mt-2">Uji & Amankan</h4>
                            <p class="text-sm text-slate-500">Nyalakan, uji transaksi dan konektivitas, lalu rapikan semua kabel agar aman.</p>
                        </li>
                    </ol>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Simulasi Skenario Transaksi & Solusi ✨</h3>
                    <p class="text-slate-600 mb-4">Jelaskan skenario transaksi yang gagal atau bermasalah, dan Gemini akan menganalisis potensi penyebab serta menyarankan langkah-langkah solusi bagi operator.</p>
                    <textarea id="cilicoTransactionScenarioPrompt" rows="4" placeholder="Contoh: Penumpang mencoba membayar dengan kartu NFC, tetapi perangkat tidak merespons." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getCilicoTransactionScenario" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Solusi Skenario ✨</button>
                    <div id="cilicoTransactionScenarioResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingCilicoTransactionScenario" class="text-center hidden">Memproses...</div>
                        <div id="cilicoTransactionScenarioContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Penjelasan Kode Error EDC Cilico CM550X ✨</h3>
                    <p class="text-slate-600 mb-4">Masukkan kode error atau deskripsi masalah singkat dari perangkat **Cilico CM550X** Anda untuk mendapatkan penjelasan dan saran *troubleshooting* awal.</p>
                    <div class="flex flex-col sm:flex-row gap-4 items-center mb-4">
                        <label for="cilicoErrorCodeInput" class="text-slate-700 font-medium">Kode Error / Deskripsi:</label>
                        <input type="text" id="cilicoErrorCodeInput" placeholder="Ex: Pembaca NFC tidak berfungsi" class="flex-grow p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6]">
                        <button id="explainCilicoError" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Jelaskan Error ✨</button>
                    </div>
                    <div id="cilicoErrorExplanationResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingCilicoError" class="text-center hidden">Memproses...</div>
                        <div id="cilicoErrorResultContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Saran Konfigurasi Perangkat EDC Cilico CM550X ✨</h3>
                    <p class="text-slate-600 mb-4">Tanyakan tentang konfigurasi umum atau *best practice* untuk perangkat **Cilico CM550X**.</p>
                    <textarea id="cilicoConfigPrompt" rows="4" placeholder="Contoh: Apa saja pengaturan Wi-Fi terbaik untuk lokasi bus yang bergerak?" class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getCilicoConfigSuggestion" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Saran Konfigurasi ✨</button>
                    <div id="cilicoConfigResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingCilicoConfig" class="text-center hidden">Memproses...</div>
                        <div id="cilicoConfigResultContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Ringkasan Data Transaksi Harian Cilico CM550X ✨</h3>
                    <p class="text-slate-600 mb-4">Masukkan data transaksi harian (misalnya, "NFC: 15x, QR: 20x") untuk mendapatkan ringkasan kinerja dari perangkat **Cilico CM550X**.</p>
                    <textarea id="cilicoTransactionSummaryPrompt" rows="4" placeholder="Contoh: 'Pagi: 10x NFC, 5x QR. Siang: 20x NFC, 10x QR. Malam: 5x NFC, 2x QR.'" class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getDailyCilicoTransactionSummary" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Ringkasan ✨</button>
                    <div id="cilicoTransactionSummaryResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingCilicoTransactionSummary" class="text-center hidden">Memproses...</div>
                        <div id="cilicoTransactionSummaryContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Saran Penempatan Optimal Perangkat Cilico CM550X ✨</h3>
                    <p class="text-slate-600 mb-4">Jelaskan tata letak bus (misalnya, "bus kota dengan banyak penumpang berdiri", "bus pariwisata dengan kursi terbatas") untuk mendapatkan saran penempatan optimal perangkat Cilico CM550X.</p>
                    <textarea id="cilicoPlacementPrompt" rows="4" placeholder="Contoh: Bus kota, area pintu masuk, banyak penumpang berdiri." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getCilicoPlacementSuggestion" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Saran Penempatan ✨</button>
                    <div id="cilicoPlacementResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingCilicoPlacement" class="text-center hidden">Memproses...</div>
                        <div id="cilicoPlacementContent"></div>
                    </div>
                </div>
            </section>

            <section id="tob-hcctg">
                <h2 class="text-3xl font-bold text-center mb-8 text-[#023E8A]">BAGIAN 4: Sistem Pembayaran - TOB HCCTG P18-Q</h2>
                <p class="text-lg text-slate-600 text-center mb-6">HCCTG P18-Q adalah mesin validator tiket bus **yang terpasang secara permanen**, dirancang khusus untuk lingkungan transportasi publik, menawarkan dukungan pembayaran komprehensif dan ketahanan tinggi.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                     <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">⚙️</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">OS & CPU</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">Android 9.0</p>
                         <p class="text-sm text-slate-500">Didukung Android 9.0 dengan KunT11 Quad-core 2.0 GHz untuk performa tangguh.</p>
                     </div>
                      <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">💳</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Multi-Pembaca</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">NFC, IC, Mag</p>
                         <p class="text-sm text-slate-500">Mendukung pemindaian kode 1D/2D profesional dan NFC (13.56MHz).</p>
                     </div>
                      <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">💪</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Ketahanan</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">IP54 & IK06</p>
                         <p class="text-sm text-slate-500">Tahan debu, percikan air (IP54) dan benturan (IK06), ideal untuk bus.</p>
                     </div>
                      <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                         <span class="text-5xl">⚡</span>
                         <h3 class="text-xl font-bold mt-2 text-[#0077B6]">Daya Langsung</h3>
                         <p class="text-3xl font-extrabold text-[#023E8A] my-2">9-48V</p>
                         <p class="text-sm text-slate-500">Dapat langsung dihubungkan ke sistem listrik bus 12V atau 24V.</p>
                     </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#0077B6]">Langkah Pemasangan Fisik TOB HCCTG P18-Q</h3>
                    <ol class="grid md:grid-cols-3 gap-6 text-center">
                        <li class="border-t-4 border-[#90E0EF] pt-4">
                            <span class="text-3xl font-bold text-[#0096C7]">1</span>
                            <h4 class="font-bold mt-2">Pilih Lokasi</h4>
                            <p class="text-sm text-slate-500">Pasang di tiang dekat pintu masuk yang kokoh dan mudah dijangkau penumpang untuk *tapping* atau *scanning*.</p>
                        </li>
                         <li class="border-t-4 border-[#48CAE4] pt-4">
                            <span class="text-3xl font-bold text-[#0077B6]">2</span>
                            <h4 class="font-bold mt-2">Sambung Listrik</h4>
                            <p class="text-sm text-slate-500">Hubungkan kabel daya (+/-) P18-Q ke sumber listrik bus (9-48V) melalui sekring yang sesuai.</p>
                        </li>
                         <li class="border-t-4 border-[#0077B6] pt-4">
                            <span class="text-3xl font-bold text-[#023E8A]">3</span>
                            <h4 class="font-bold mt-2">Uji & Amankan</h4>
                            <p class="text-sm text-slate-500">Nyalakan, uji transaksi dan konektivitas, lalu rapikan semua kabel agar aman.</p>
                        </li>
                    </ol>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6 mt-8">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Penjelasan Kode Error TOB HCCTG P18-Q ✨</h3>
                    <p class="text-slate-600 mb-4">Masukkan kode error atau deskripsi masalah singkat dari perangkat **HCCTG P18-Q** Anda untuk mendapatkan penjelasan dan saran *troubleshooting* awal.</p>
                    <div class="flex flex-col sm:flex-row gap-4 items-center mb-4">
                        <label for="hcctgErrorCodeInput" class="text-slate-700 font-medium">Kode Error / Deskripsi:</label>
                        <input type="text" id="hcctgErrorCodeInput" placeholder="Ex: E01 / Transaksi Ditolak" class="flex-grow p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6]">
                        <button id="explainHcctgError" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Jelaskan Error ✨</button>
                    </div>
                    <div id="hcctgErrorExplanationResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingHcctgError" class="text-center hidden">Memproses...</div>
                        <div id="hcctgErrorResultContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Saran Konfigurasi Perangkat TOB HCCTG P18-Q ✨</h3>
                    <p class="text-slate-600 mb-4">Tanyakan tentang konfigurasi umum atau *best practice* untuk perangkat **HCCTG P18-Q**.</p>
                    <textarea id="hcctgConfigPrompt" rows="4" placeholder="Contoh: Apa saja pengaturan penting untuk koneksi 4G yang stabil?" class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getHcctgConfigSuggestion" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Saran Konfigurasi ✨</button>
                    <div id="hcctgConfigResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingHcctgConfig" class="text-center hidden">Memproses...</div>
                        <div id="hcctgConfigResultContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Ringkasan Data Transaksi Harian TOB HCCTG P18-Q ✨</h3>
                    <p class="text-slate-600 mb-4">Masukkan data transaksi harian (misalnya, "NFC: 15x, Chip: 20x") untuk mendapatkan ringkasan kinerja dari perangkat **HCCTG P18-Q**.</p>
                    <textarea id="hcctgTransactionSummaryPrompt" rows="4" placeholder="Contoh: 'Pagi: 10x NFC, 5x Chip. Siang: 20x NFC, 10x Chip. Malam: 5x NFC, 2x Chip.'" class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getDailyHcctgTransactionSummary" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Ringkasan ✨</button>
                    <div id="hcctgTransactionSummaryResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingHcctgTransactionSummary" class="text-center hidden">Memproses...</div>
                        <div id="hcctgTransactionSummaryContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Saran Optimalisasi Pencetakan Tiket P18-Q ✨</h3>
                    <p class="text-slate-600 mb-4">Jelaskan masalah pencetakan (misalnya, "cetakan buram", "kertas sering macet") atau kebutuhan optimalisasi Anda pada printer P18-Q.</p>
                    <textarea id="hcctgPrintingOptimizationPrompt" rows="4" placeholder="Contoh: Cetakan tiket sering buram dan sulit dibaca." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getHcctgPrintingOptimization" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Saran Optimalisasi ✨</button>
                    <div id="hcctgPrintingOptimizationResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingHcctgPrintingOptimization" class="text-center hidden">Memproses...</div>
                        <div id="hcctgPrintingOptimizationContent"></div>
                    </div>
                </div>

                <div class="lg:col-span-4 bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="text-2xl font-bold text-center mb-6 text-[#0077B6]">Tips Pembersihan & Perawatan Sensor Pembaca Kartu ✨</h3>
                    <p class="text-slate-600 mb-4">Jelaskan jenis masalah (misalnya, "pembaca NFC tidak responsif", "IC card sulit terbaca") dan frekuensi penggunaan untuk mendapatkan tips perawatan sensor pembaca kartu HCCTG P18-Q.</p>
                    <textarea id="hcctgSensorMaintenancePrompt" rows="4" placeholder="Contoh: Pembaca NFC kadang tidak merespons, penggunaan harian tinggi." class="w-full p-2 border border-slate-300 rounded-md focus:ring-[#0077B6] focus:border-[#0077B6] mb-4"></textarea>
                    <button id="getHcctgSensorMaintenance" class="px-6 py-3 bg-[#0077B6] text-white font-semibold rounded-full hover:bg-[#023E8A] transition-colors duration-200">Dapatkan Tips Perawatan ✨</button>
                    <div id="hcctgSensorMaintenanceResult" class="mt-4 p-4 bg-[#E0F7FA] rounded-lg text-slate-700 hidden">
                        <div id="loadingHcctgSensorMaintenance" class="text-center hidden">Memproses...</div>
                        <div id="hcctgSensorMaintenanceContent"></div>
                    </div>
                </div>
            </section>

        </main>
        
        <footer class="text-center mt-12 md:mt-16 pt-8 border-t border-[#90E0EF]">
            <h3 class="text-xl font-bold text-[#023E8A]">Keselamatan Adalah Prioritas Utama</h3>
            <p class="mt-2 text-[#0077B6]">Selalu lepaskan terminal negatif aki sebelum memulai pekerjaan kelistrikan. Bekerja dengan cerdas, bekerja dengan aman.</p>
        </footer>
    </div>

    <script>
        const chartTooltipConfig = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            }
                            return label;
                        }
                    }
                }
            }
        };

        const wrapLabel = (label, maxLength) => {
            if (label.length <= maxLength) return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            words.forEach(word => {
                if ((currentLine + ' ' + word).length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine += ' ' + word;
                }
            });
            lines.push(currentLine.trim());
            return lines;
        };

        const toolsCtx = document.getElementById('toolsChart').getContext('2d');
        new Chart(toolsCtx, {
            type: 'doughnut',
            data: {
                labels: ['Multimeter', 'Tang Krimping', 'Konektor Set', 'Kabel & Sekring', 'Isolasi/Shrink Tube'],
                datasets: [{
                    label: 'Alat Kerja',
                    data: [25, 20, 15, 25, 15],
                    backgroundColor: ['#0077B6', '#0096C7', '#00B4D8', '#48CAE4', '#90E0EF'],
                    borderColor: '#fff',
                    borderWidth: 2,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: { size: 10 }
                        }
                    },
                    tooltip: chartTooltipConfig.plugins.tooltip
                }
            }
        });

        // =====================================================================
        // Gemini API Integrations - IMPORTANT: REPLACE "YOUR_GEMINI_API_KEY"
        // Get your API Key from Google AI Studio: https://makersuite.google.com/
        // =====================================================================
        const GEMINI_API_KEY = "AIzaSyBwezegTPTQtHb4NnTncJWoOmDJmKmaEJk"; 
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`;

        // Gemini API Integration 1: Optimal Cable and Fuse Recommender
        const getRecommendationBtn = document.getElementById('getRecommendation');
        const inputCurrent = document.getElementById('inputCurrent');
        const inputVoltage = document.getElementById('inputVoltage');
        const recommendationResult = document.getElementById('recommendationResult');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const resultContent = document.getElementById('resultContent');

        getRecommendationBtn.addEventListener('click', async () => {
            const totalCurrent = parseFloat(inputCurrent.value);
            const voltage = inputVoltage.value;

            if (isNaN(totalCurrent) || totalCurrent <= 0) {
                recommendationResult.classList.remove('hidden');
                resultContent.textContent = 'Harap masukkan arus total yang valid (angka positif).';
                return;
            }

            recommendationResult.classList.remove('hidden');
            loadingIndicator.classList.remove('hidden');
            resultContent.textContent = '';

            const prompt = `Sebagai ahli kelistrikan kendaraan, berikan rekomendasi ukuran kabel AWG/mm² yang aman dan ukuran fuse (sekring) yang sesuai untuk perangkat dengan total arus ${totalCurrent} Ampere pada sistem ${voltage}V. Sertakan faktor keamanan 1.25x untuk sekring. Jelaskan secara singkat alasan di balik rekomendasi tersebut. Berikan dalam format paragraf singkat dan to the point.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    resultContent.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    resultContent.textContent = 'Maaf, tidak dapat menghasilkan saran. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for fuse recommendation:", error);
                resultContent.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        });

        // Gemini API Integration - Simple Circuit Design Suggestion
        const getCircuitDesignBtn = document.getElementById('getCircuitDesign');
        const circuitDesignPromptInput = document.getElementById('circuitDesignPrompt');
        const circuitDesignResultDiv = document.getElementById('circuitDesignResult');
        const loadingCircuitDiv = document.getElementById('loadingCircuit');
        const circuitResultContentDiv = document.getElementById('circuitResultContent');

        getCircuitDesignBtn.addEventListener('click', async () => {
            const userPrompt = circuitDesignPromptInput.value.trim();
            if (userPrompt === "") {
                circuitDesignResultDiv.classList.remove('hidden');
                circuitResultContentDiv.textContent = 'Harap jelaskan kebutuhan rangkaian sederhana Anda.';
                return;
            }

            circuitDesignResultDiv.classList.remove('hidden');
            loadingCircuitDiv.classList.remove('hidden');
            circuitResultContentDiv.textContent = '';

            const prompt = `Saya ingin merancang rangkaian kelistrikan sederhana pada bus. Kebutuhan saya adalah: "${userPrompt}". Sebagai ahli kelistrikan otomotif, berikan saran desain dasar, komponen kunci yang mungkin dibutuhkan (misalnya relay, sakelar, sensor), dan prinsip kerja singkat rangkaian tersebut.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    circuitResultContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    circuitResultContentDiv.textContent = 'Maaf, tidak dapat menghasilkan saran desain. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for circuit design:", error);
                circuitResultContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingCircuitDiv.classList.add('hidden');
            }
        });

        // Gemini API Integration - Troubleshooting General Electrical Issues
        const getElectricalTroubleshootBtn = document.getElementById('getElectricalTroubleshoot');
        const electricalTroubleshootPromptInput = document.getElementById('electricalTroubleshootPrompt');
        const electricalTroubleshootResultDiv = document.getElementById('electricalTroubleshootResult');
        const loadingElectricalDiv = document.getElementById('loadingElectrical');
        const electricalResultContentDiv = document.getElementById('electricalResultContent');

        getElectricalTroubleshootBtn.addEventListener('click', async () => {
            const userPrompt = electricalTroubleshootPromptInput.value.trim();
            if (userPrompt === "") {
                electricalTroubleshootResultDiv.classList.remove('hidden');
                electricalResultContentDiv.textContent = 'Harap masukkan gejala masalah kelistrikan yang Anda alami.';
                return;
            }

            electricalTroubleshootResultDiv.classList.remove('hidden');
            loadingElectricalDiv.classList.remove('hidden');
            electricalResultContentDiv.textContent = '';

            const prompt = `Saya mengalami masalah kelistrikan pada bus dengan gejala berikut: "${userPrompt}". Sebagai ahli kelistrikan otomotif, berikan potensi penyebab masalah ini dan langkah-langkah troubleshooting awal yang dapat saya lakukan untuk mendiagnosis dan memperbaikinya.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    electricalResultContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    electricalResultContentDiv.textContent = 'Maaf, tidak dapat menganalisis masalah kelistrikan. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for electrical troubleshoot:", error);
                electricalResultContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingElectricalDiv.classList.add('hidden');
            }
        });

        // NEW: Gemini API Integration - Generator Jadwal Perawatan Preventif Kelistrikan
        const getElectricalMaintenanceBtn = document.getElementById('getElectricalMaintenance');
        const electricalMaintenancePromptInput = document.getElementById('electricalMaintenancePrompt');
        const electricalMaintenanceResultDiv = document.getElementById('electricalMaintenanceResult');
        const loadingElectricalMaintenanceDiv = document.getElementById('loadingElectricalMaintenance');
        const electricalMaintenanceContentDiv = document.getElementById('electricalMaintenanceContent');

        getElectricalMaintenanceBtn.addEventListener('click', async () => {
            const userPrompt = electricalMaintenancePromptInput.value.trim();
            if (userPrompt === "") {
                electricalMaintenanceResultDiv.classList.remove('hidden');
                electricalMaintenanceContentDiv.textContent = 'Harap masukkan jenis kendaraan dan frekuensi penggunaan.';
                return;
            }

            electricalMaintenanceResultDiv.classList.remove('hidden');
            loadingElectricalMaintenanceDiv.classList.remove('hidden');
            electricalMaintenanceContentDiv.textContent = '';

            const prompt = `Sebagai ahli perawatan kendaraan, berikan saran jadwal perawatan preventif untuk komponen kelistrikan utama (aki, alternator, kabel, sekring, lampu) pada kendaraan dengan spesifikasi berikut: "${userPrompt}". Sajikan dalam format poin-poin bulanan/tahunan yang jelas.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    electricalMaintenanceContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    electricalMaintenanceContentDiv.textContent = 'Maaf, tidak dapat menghasilkan jadwal perawatan. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for electrical maintenance:", error);
                electricalMaintenanceContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingElectricalMaintenanceDiv.classList.add('hidden');
            }
        });
        
        // Gemini API Integration - GPS GT08 Troubleshooting
        const getGpsTroubleshootBtn = document.getElementById('getGpsTroubleshoot');
        const gpsTroubleshootPromptInput = document.getElementById('gpsTroubleshootPrompt');
        const gpsTroubleshootResultDiv = document.getElementById('gpsTroubleshootResult');
        const loadingGpsDiv = document.getElementById('loadingGps');
        const gpsResultContentDiv = document.getElementById('gpsResultContent');

        getGpsTroubleshootBtn.addEventListener('click', async () => {
            const userPrompt = gpsTroubleshootPromptInput.value.trim();
            if (userPrompt === "") {
                gpsTroubleshootResultDiv.classList.remove('hidden');
                gpsResultContentDiv.textContent = 'Harap masukkan gejala masalah GPS GT08 yang Anda alami.';
                return;
            }

            gpsTroubleshootResultDiv.classList.remove('hidden');
            loadingGpsDiv.classList.remove('hidden');
            gpsResultContentDiv.textContent = '';

            const prompt = `Saya mengalami masalah dengan GPS Tracker GT08 pada bus dengan gejala berikut: "${userPrompt}". Sebagai ahli pelacakan kendaraan, berikan potensi penyebab masalah ini dan langkah-langkah troubleshooting awal yang dapat saya lakukan untuk mendiagnosis dan memperbaikinya. Fokus pada masalah sinyal GPS, konektivitas GSM, daya, atau konfigurasi perangkat.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    gpsResultContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    gpsResultContentDiv.textContent = 'Maaf, tidak dapat menganalisis masalah GPS. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for GPS troubleshoot:", error);
                gpsResultContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingGpsDiv.classList.add('hidden');
            }
        });


        // NEW: Gemini API Integration - Analisis Rute & Efisiensi Bahan Bakar
        const getFuelEfficiencyBtn = document.getElementById('getFuelEfficiency');
        const fuelEfficiencyPromptInput = document.getElementById('fuelEfficiencyPrompt');
        const fuelEfficiencyResultDiv = document.getElementById('fuelEfficiencyResult');
        const loadingFuelEfficiencyDiv = document.getElementById('loadingFuelEfficiency');
        const fuelEfficiencyContentDiv = document.getElementById('fuelEfficiencyContent');

        getFuelEfficiencyBtn.addEventListener('click', async () => {
            const userPrompt = fuelEfficiencyPromptInput.value.trim();
            if (userPrompt === "") {
                fuelEfficiencyResultDiv.classList.remove('hidden');
                fuelEfficiencyContentDiv.textContent = 'Harap jelaskan kebiasaan mengemudi atau tantangan rute Anda.';
                return;
            }

            fuelEfficiencyResultDiv.classList.remove('hidden');
            loadingFuelEfficiencyDiv.classList.remove('hidden');
            fuelEfficiencyContentDiv.textContent = '';

            const prompt = `Sebagai ahli efisiensi kendaraan, berikan analisis dan saran untuk meningkatkan efisiensi bahan bakar dan rute berdasarkan deskripsi berikut: "${userPrompt}". Identifikasi pola yang mungkin suboptimal dan berikan tips praktis.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    fuelEfficiencyContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    fuelEfficiencyContentDiv.textContent = 'Maaf, tidak dapat menganalisis efisiensi bahan bakar. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for fuel efficiency:", error);
                fuelEfficiencyContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingFuelEfficiencyDiv.classList.add('hidden');
            }
        });

        // NEW: Gemini API Integration - Saran Optimasi Penggunaan Data GPS
        const getGpsDataOptimizationBtn = document.getElementById('getGpsDataOptimization');
        const gpsDataOptimizationPromptInput = document.getElementById('gpsDataOptimizationPrompt');
        const gpsDataOptimizationResultDiv = document.getElementById('gpsDataOptimizationResult');
        const loadingGpsDataOptimizationDiv = document.getElementById('loadingGpsDataOptimization');
        const gpsDataOptimizationContentDiv = document.getElementById('gpsDataOptimizationContent');

        getGpsDataOptimizationBtn.addEventListener('click', async () => {
            const userPrompt = gpsDataOptimizationPromptInput.value.trim();
            if (userPrompt === "") {
                gpsDataOptimizationResultDiv.classList.remove('hidden');
                gpsDataOptimizationContentDiv.textContent = 'Harap jelaskan frekuensi pelaporan dan masalah terkait penggunaan data GPS Anda.';
                return;
            }

            gpsDataOptimizationResultDiv.classList.remove('hidden');
            loadingGpsDataOptimizationDiv.classList.remove('hidden');
            gpsDataOptimizationContentDiv.textContent = '';

            const prompt = `Sebagai ahli perangkat GPS, berikan saran untuk mengoptimalkan penggunaan data pada GPS GT08 yang saat ini diatur dengan spesifikasi berikut: "${userPrompt}". Fokus pada cara menyeimbangkan akurasi pelacakan dengan efisiensi konsumsi data dan daya baterai.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    gpsDataOptimizationContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    gpsDataOptimizationContentDiv.textContent = 'Maaf, tidak dapat menghasilkan saran optimasi data GPS. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for GPS data optimization:", error);
                gpsDataOptimizationContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingGpsDataOptimizationDiv.classList.add('hidden');
            }
        });


        // Gemini API Integration - Cilico CM550X Error Code Explainer
        const explainCilicoErrorBtn = document.getElementById('explainCilicoError');
        const cilicoErrorCodeInput = document.getElementById('cilicoErrorCodeInput');
        const cilicoErrorExplanationResult = document.getElementById('cilicoErrorExplanationResult');
        const loadingCilicoError = document.getElementById('loadingCilicoError');
        const cilicoErrorResultContent = document.getElementById('cilicoErrorResultContent');

        explainCilicoErrorBtn.addEventListener('click', async () => {
            const errorCode = cilicoErrorCodeInput.value.trim();
            if (errorCode === "") {
                cilicoErrorExplanationResult.classList.remove('hidden');
                cilicoErrorResultContent.textContent = 'Harap masukkan kode error atau deskripsi masalah.';
                return;
            }

            cilicoErrorExplanationResult.classList.remove('hidden');
            loadingCilicoError.classList.remove('hidden');
            cilicoErrorResultContent.textContent = '';

            const prompt = `Sebagai teknisi yang menghadapi kode error atau deskripsi masalah '${errorCode}' pada perangkat EDC Cilico CM550X, jelaskan arti dari kode error/masalah ini dan berikan langkah-langkah troubleshooting awal yang dapat saya lakukan di lapangan. Fokus pada kemungkinan penyebab terkait konektivitas (4G/Wi-Fi), pembaca kartu (NFC/Scan), printer, atau masalah perangkat keras umum.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    cilicoErrorResultContent.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    cilicoErrorResultContent.textContent = 'Maaf, tidak dapat menganalisis masalah. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for Cilico error explanation:", error);
                cilicoErrorResultContent.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingCilicoError.classList.add('hidden');
            }
        });

        // Gemini API Integration - Cilico CM550X Configuration Tips
        const getCilicoConfigSuggestionBtn = document.getElementById('getCilicoConfigSuggestion');
        const cilicoConfigPromptInput = document.getElementById('cilicoConfigPrompt');
        const cilicoConfigResultDiv = document.getElementById('cilicoConfigResult');
        const loadingCilicoConfigDiv = document.getElementById('loadingCilicoConfig');
        const cilicoConfigResultContentDiv = document.getElementById('cilicoConfigResultContent');

        getCilicoConfigSuggestionBtn.addEventListener('click', async () => {
            const userPrompt = cilicoConfigPromptInput.value.trim();
            if (userPrompt === "") {
                cilicoConfigResultDiv.classList.remove('hidden');
                cilicoConfigResultContentDiv.textContent = 'Harap tanyakan tentang konfigurasi yang Anda butuhkan.';
                return;
            }

            cilicoConfigResultDiv.classList.remove('hidden');
            loadingCilicoConfigDiv.classList.remove('hidden');
            cilicoConfigResultContentDiv.textContent = '';

            const prompt = `Sebagai ahli konfigurasi perangkat EDC Cilico CM550X, berikan saran konfigurasi atau best practice untuk "${userPrompt}". Fokus pada pengaturan penting yang sering diubah atau dioptimalkan, seperti konfigurasi Wi-Fi, jaringan 4G, atau pengaturan pemindai barcode.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    cilicoConfigResultContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    cilicoConfigResultContentDiv.textContent = 'Maaf, tidak dapat menghasilkan saran konfigurasi. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for Cilico config:", error);
                cilicoConfigResultContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingCilicoConfigDiv.classList.add('hidden');
            }
        });

        // Gemini API Integration - Cilico CM550X Daily Transaction Data Summary
        const getDailyCilicoTransactionSummaryBtn = document.getElementById('getDailyCilicoTransactionSummary');
        const cilicoTransactionSummaryPromptInput = document.getElementById('cilicoTransactionSummaryPrompt');
        const cilicoTransactionSummaryResultDiv = document.getElementById('cilicoTransactionSummaryResult');
        const loadingCilicoTransactionSummaryDiv = document.getElementById('loadingCilicoTransactionSummary');
        const cilicoTransactionSummaryContentDiv = document.getElementById('cilicoTransactionSummaryContent');

        getDailyCilicoTransactionSummaryBtn.addEventListener('click', async () => {
            const userPrompt = cilicoTransactionSummaryPromptInput.value.trim();
            if (userPrompt === "") {
                cilicoTransactionSummaryResultDiv.classList.remove('hidden');
                cilicoTransactionSummaryContentDiv.textContent = 'Harap masukkan data transaksi harian untuk diringkas.';
                return;
            }

            cilicoTransactionSummaryResultDiv.classList.remove('hidden');
            loadingCilicoTransactionSummaryDiv.classList.remove('hidden');
            cilicoTransactionSummaryContentDiv.textContent = '';

            const prompt = `Saya memiliki data transaksi harian dari perangkat EDC bus Cilico CM550X. Data mentahnya adalah: "${userPrompt}". Sebagai analis data, berikan ringkasan kinerja transaksi untuk hari ini, termasuk total transaksi, distribusi jenis pembayaran (misalnya, NFC, QR, Chip, Scan Barcode), dan wawasan singkat yang relevan. Format dalam poin-poin atau paragraf singkat.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    cilicoTransactionSummaryContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    cilicoTransactionSummaryContentDiv.textContent = 'Maaf, tidak dapat meringkas data transaksi. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for Cilico transaction summary:", error);
                cilicoTransactionSummaryContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingCilicoTransactionSummaryDiv.classList.add('hidden');
            }
        });

        // NEW: Gemini API Integration - Saran Penempatan Optimal Perangkat Cilico CM550X
        const getCilicoPlacementSuggestionBtn = document.getElementById('getCilicoPlacementSuggestion');
        const cilicoPlacementPromptInput = document.getElementById('cilicoPlacementPrompt');
        const cilicoPlacementResultDiv = document.getElementById('cilicoPlacementResult');
        const loadingCilicoPlacementDiv = document.getElementById('loadingCilicoPlacement'); 
        const cilicoPlacementContentDiv = document.getElementById('cilicoPlacementContent');

        getCilicoPlacementSuggestionBtn.addEventListener('click', async () => {
            const userPrompt = cilicoPlacementPromptInput.value.trim();
            if (userPrompt === "") {
                cilicoPlacementResultDiv.classList.remove('hidden');
                cilicoPlacementContentDiv.textContent = 'Harap jelaskan lokasi penempatan yang ingin Anda pertimbangkan.';
                return;
            }

            cilicoPlacementResultDiv.classList.remove('hidden');
            loadingCilicoPlacementDiv.classList.remove('hidden');
            cilicoPlacementContentDiv.textContent = '';

            const prompt = `Sebagai ahli pemasangan perangkat di transportasi publik, berikan saran penempatan optimal untuk perangkat EDC Cilico CM550X (handheld) di dalam bus berdasarkan deskripsi lokasi berikut: "${userPrompt}". Pertimbangkan faktor aksesibilitas penumpang, visibilitas layar, kekuatan sinyal (WiFi/4G), keamanan (misalnya, kemungkinan terjatuh atau hilang saat penggunaan handheld), dan kemudahan perawatan.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    cilicoPlacementContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    cilicoPlacementContentDiv.textContent = 'Maaf, tidak dapat menghasilkan saran penempatan. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for Cilico placement:", error);
                cilicoPlacementContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingCilicoPlacementDiv.classList.add('hidden');
            }
        });


        // Gemini API Integration - HCCTG P18-Q Error Code Explainer
        const explainHcctgErrorBtn = document.getElementById('explainHcctgError');
        const hcctgErrorCodeInput = document.getElementById('hcctgErrorCodeInput');
        const hcctgErrorExplanationResult = document.getElementById('hcctgErrorExplanationResult');
        const loadingHcctgError = document.getElementById('loadingHcctgError');
        const hcctgErrorResultContent = document.getElementById('hcctgErrorResultContent');

        explainHcctgErrorBtn.addEventListener('click', async () => {
            const errorCode = hcctgErrorCodeInput.value.trim();
            if (errorCode === "") {
                hcctgErrorExplanationResult.classList.remove('hidden');
                hcctgErrorResultContent.textContent = 'Harap masukkan kode error atau deskripsi masalah.';
                return;
            }

            hcctgErrorExplanationResult.classList.remove('hidden');
            loadingHcctgError.classList.remove('hidden');
            hcctgErrorResultContent.textContent = '';

            const prompt = `Sebagai teknisi yang menghadapi kode error atau deskripsi masalah '${errorCode}' pada perangkat validator tiket bus HCCTG P18-Q, jelaskan arti dari kode error/masalah ini dan berikan langkah-langkah troubleshooting awal yang dapat saya lakukan di lapangan. Fokus pada kemungkinan penyebab terkait konektivitas (4G/Wi-Fi), pembaca kartu (NFC/IC/QR), atau masalah perangkat keras umum.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    hcctgErrorResultContent.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    hcctgErrorResultContent.textContent = 'Maaf, tidak dapat menganalisis masalah. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for HCCTG error explanation:", error);
                hcctgErrorResultContent.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingHcctgError.classList.add('hidden');
            }
        });

        // Gemini API Integration - HCCTG P18-Q Configuration Tips
        const getHcctgConfigSuggestionBtn = document.getElementById('getHcctgConfigSuggestion');
        const hcctgConfigPromptInput = document.getElementById('hcctgConfigPrompt');
        const hcctgConfigResultDiv = document.getElementById('hcctgConfigResult');
        const loadingHcctgConfigDiv = document.getElementById('loadingHcctgConfig');
        const hcctgConfigResultContentDiv = document.getElementById('hcctgConfigResultContent');

        getHcctgConfigSuggestionBtn.addEventListener('click', async () => {
            const userPrompt = hcctgConfigPromptInput.value.trim();
            if (userPrompt === "") {
                hcctgConfigResultDiv.classList.remove('hidden');
                hcctgConfigResultContentDiv.textContent = 'Harap tanyakan tentang konfigurasi yang Anda butuhkan.';
                return;
            }

            hcctgConfigResultDiv.classList.remove('hidden');
            loadingHcctgConfigDiv.classList.remove('hidden');
            hcctgConfigResultContentDiv.textContent = '';

            const prompt = `Sebagai ahli konfigurasi perangkat EDC HCCTG P18-Q, berikan saran konfigurasi atau best practice untuk "${userPrompt}". Fokus pada pengaturan penting yang sering diubah atau dioptimalkan, seperti konfigurasi koneksi 4G/Wi-Fi, pembaca kartu, atau fitur GPS.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    hcctgConfigResultContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    hcctgConfigResultContentDiv.textContent = 'Maaf, tidak dapat menghasilkan saran konfigurasi. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for HCCTG config:", error);
                hcctgConfigResultContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingHcctgConfigDiv.classList.add('hidden');
            }
        });

        // Gemini API Integration - HCCTG P18-Q Daily Transaction Data Summary
        const getDailyHcctgTransactionSummaryBtn = document.getElementById('getDailyHcctgTransactionSummary');
        const hcctgTransactionSummaryPromptInput = document.getElementById('hcctgTransactionSummaryPrompt');
        const hcctgTransactionSummaryResultDiv = document.getElementById('hcctgTransactionSummaryResult');
        const loadingHcctgTransactionSummaryDiv = document.getElementById('loadingHcctgTransactionSummary');
        const hcctgTransactionSummaryContentDiv = document.getElementById('hcctgTransactionSummaryContent');

        getDailyHcctgTransactionSummaryBtn.addEventListener('click', async () => {
            const userPrompt = hcctgTransactionSummaryPromptInput.value.trim();
            if (userPrompt === "") {
                hcctgTransactionSummaryResultDiv.classList.remove('hidden');
                hcctgTransactionSummaryContentDiv.textContent = 'Harap masukkan data transaksi harian untuk diringkas.';
                return;
            }

            hcctgTransactionSummaryResultDiv.classList.remove('hidden');
            loadingHcctgTransactionSummaryDiv.classList.remove('hidden');
            hcctgTransactionSummaryContentDiv.textContent = '';

            const prompt = `Saya memiliki data transaksi harian dari perangkat EDC bus HCCTG P18-Q. Data mentahnya adalah: "${userPrompt}". Sebagai analis data, berikan ringkasan kinerja transaksi untuk hari ini, termasuk total transaksi, distribusi jenis pembayaran (misalnya, NFC, IC, Magnetik, Scan Barcode), dan wawasan singkat yang relevan. Format dalam poin-poin atau paragraf singkat.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    hcctgTransactionSummaryContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    hcctgTransactionSummaryContentDiv.textContent = 'Maaf, tidak dapat meringkas data transaksi. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for HCCTG transaction summary:", error);
                hcctgTransactionSummaryContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingHcctgTransactionSummaryDiv.classList.add('hidden');
            }
        });

        // NEW: Gemini API Integration - Saran Optimalisasi Pencetakan Tiket P18-Q
        const getHcctgPrintingOptimizationBtn = document.getElementById('getHcctgPrintingOptimization');
        const hcctgPrintingOptimizationPromptInput = document.getElementById('hcctgPrintingOptimizationPrompt');
        const hcctgPrintingOptimizationResultDiv = document.getElementById('hcctgPrintingOptimizationResult');
        const loadingHcctgPrintingOptimizationDiv = document.getElementById('loadingHcctgPrintingOptimization');
        const hcctgPrintingOptimizationContentDiv = document.getElementById('hcctgPrintingOptimizationContent');

        getHcctgPrintingOptimizationBtn.addEventListener('click', async () => {
            const userPrompt = hcctgPrintingOptimizationPromptInput.value.trim();
            if (userPrompt === "") {
                hcctgPrintingOptimizationResultDiv.classList.remove('hidden');
                hcctgPrintingOptimizationContentDiv.textContent = 'Harap jelaskan masalah pencetakan atau kebutuhan optimalisasi Anda.';
                return;
            }

            hcctgPrintingOptimizationResultDiv.classList.remove('hidden');
            loadingHcctgPrintingOptimizationDiv.classList.remove('hidden');
            hcctgPrintingOptimizationContentDiv.textContent = '';

            const prompt = `Sebagai ahli perangkat TOB, berikan saran optimalisasi pencetakan tiket atau langkah-langkah troubleshooting untuk printer pada perangkat HCCTG P18-Q dengan masalah/kebutuhan berikut: "${userPrompt}". Fokus pada tips perawatan, kalibrasi, atau pengaturan yang dapat meningkatkan kualitas cetak dan mengurangi masalah.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    hcctgPrintingOptimizationContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    hcctgPrintingOptimizationContentDiv.textContent = 'Maaf, tidak dapat menghasilkan saran optimalisasi. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for HCCTG printing optimization:", error);
                hcctgPrintingOptimizationContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingHcctgPrintingOptimizationDiv.classList.add('hidden');
            }
        });

        // NEW: Gemini API Integration - Tips Pembersihan & Perawatan Sensor Pembaca Kartu
        const getHcctgSensorMaintenanceBtn = document.getElementById('getHcctgSensorMaintenance');
        const hcctgSensorMaintenancePromptInput = document.getElementById('hcctgSensorMaintenancePrompt');
        const hcctgSensorMaintenanceResultDiv = document.getElementById('hcctgSensorMaintenanceResult');
        const loadingHcctgSensorMaintenanceDiv = document.getElementById('loadingHcctgSensorMaintenance');
        const hcctgSensorMaintenanceContentDiv = document.getElementById('hcctgSensorMaintenanceContent');

        getHcctgSensorMaintenanceBtn.addEventListener('click', async () => {
            const userPrompt = hcctgSensorMaintenancePromptInput.value.trim();
            if (userPrompt === "") {
                hcctgSensorMaintenanceResultDiv.classList.remove('hidden');
                hcctgSensorMaintenanceContentDiv.textContent = 'Harap jelaskan jenis masalah atau kebutuhan perawatan sensor.';
                return;
            }

            hcctgSensorMaintenanceResultDiv.classList.remove('hidden');
            loadingHcctgSensorMaintenanceDiv.classList.remove('hidden');
            hcctgSensorMaintenanceContentDiv.textContent = '';

            const prompt = `Sebagai ahli perawatan perangkat TOB, berikan tips pembersihan dan perawatan untuk sensor pembaca kartu (NFC, IC, magnetik) pada perangkat HCCTG P18-Q dengan masalah/kebutuhan berikut: "${userPrompt}". Fokus pada langkah-langkah praktis dan frekuensi rekomendasi.`;
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    hcctgSensorMaintenanceContentDiv.textContent = result.candidates[0].content.parts[0].text;
                } else {
                    hcctgSensorMaintenanceContentDiv.textContent = 'Maaf, tidak dapat menghasilkan tips perawatan sensor. Silakan coba lagi.';
                }
            } catch (error) {
                console.error("Error calling Gemini API for HCCTG sensor maintenance:", error);
                hcctgSensorMaintenanceContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
            } finally {
                loadingHcctgSensorMaintenanceDiv.classList.add('hidden');
            }
        });

        // NEW: Gemini API Integration - Simulasi Skenario Transaksi & Solusi (Cilico CM550X)
        const getCilicoTransactionScenarioBtn = document.getElementById('getCilicoTransactionScenario');
        const cilicoTransactionScenarioPromptInput = document.getElementById('cilicoTransactionScenarioPrompt');
        const cilicoTransactionScenarioResultDiv = document.getElementById('cilicoTransactionScenarioResult');
        const loadingCilicoTransactionScenarioDiv = document.getElementById('loadingCilicoTransactionScenario');
        const cilicoTransactionScenarioContentDiv = document.getElementById('cilicoTransactionScenarioContent');

        if (getCilicoTransactionScenarioBtn) { // Added null check
            getCilicoTransactionScenarioBtn.addEventListener('click', async () => {
                const userPrompt = cilicoTransactionScenarioPromptInput.value.trim();
                if (userPrompt === "") {
                    cilicoTransactionScenarioResultDiv.classList.remove('hidden');
                    cilicoTransactionScenarioContentDiv.textContent = 'Harap jelaskan skenario transaksi yang ingin Anda simulasikan.';
                    return;
                }

                cilicoTransactionScenarioResultDiv.classList.remove('hidden');
                loadingCilicoTransactionScenarioDiv.classList.remove('hidden');
                cilicoTransactionScenarioContentDiv.textContent = '';

                const prompt = `Sebagai ahli perangkat EDC, simulasikan skenario transaksi berikut pada perangkat Cilico CM550X: "${userPrompt}". Berikan potensi penyebab kegagalan atau masalah, dan langkah-langkah solusi yang dapat dilakukan oleh operator atau teknisi.`;
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                try {
                    const response = await fetch(GEMINI_API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        cilicoTransactionScenarioContentDiv.textContent = result.candidates[0].content.parts[0].text;
                    } else {
                        cilicoTransactionScenarioContentDiv.textContent = 'Maaf, tidak dapat melakukan simulasi skenario transaksi. Silakan coba lagi.';
                    }
                } catch (error) {
                    console.error("Error calling Gemini API for Cilico transaction scenario:", error);
                    cilicoTransactionScenarioContentDiv.textContent = 'Terjadi kesalahan saat menghubungi API. Silakan coba lagi.';
                } finally {
                    loadingCilicoTransactionScenarioDiv.classList.add('hidden');
                }
            });
        }
    </script>

</body>
</html>
